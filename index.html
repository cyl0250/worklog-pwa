<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì‘ì—…ì¼ì§€</title>
  <link rel="manifest" href="manifest.json">
  <style>
    body { font-family: system-ui, sans-serif; margin: 16px; }
    .row { display:flex; gap:8px; align-items:center; margin:10px 0; }
    .stack { display:flex; flex-direction:column; gap:8px; width:100%; }
    input, select, textarea { width:100%; padding:12px; font-size:16px; box-sizing:border-box; }
    textarea { min-height: 90px; }
    button { padding:12px 14px; font-size:16px; white-space:nowrap; }
    .muted { color:#666; font-size:13px; }
    .chip { display:flex; align-items:center; gap:6px; font-size:14px; white-space:nowrap; }
    .card { border:1px solid #ddd; border-radius:12px; padding:12px; margin:10px 0; }
    details { margin-top: 10px; }
  </style>
</head>
<body>
<div id="diag" style="position:fixed;top:0;left:0;right:0;background:#fff3cd;color:#000;padding:8px;font-size:14px;z-index:9999;border-bottom:1px solid #ddd;">ì§„ë‹¨: ë¡œë”©ì¤‘...</div>
<script>
(function(){
  var d=document.getElementById('diag');
  function set(t){ if(d) d.textContent=t; }
  window.addEventListener('error', function(e){ set('ì§„ë‹¨: JS ì˜¤ë¥˜ - '+(e.message||e.type)); alert('JS ì˜¤ë¥˜: '+(e.message||e.type)); });
  window.addEventListener('unhandledrejection', function(e){ var msg=(e.reason && e.reason.message)?e.reason.message:String(e.reason); set('ì§„ë‹¨: Promise ì˜¤ë¥˜ - '+msg); alert('Promise ì˜¤ë¥˜: '+msg); });
  set('ì§„ë‹¨: index.html ë¡œë“œë¨. app.js ë¡œë”©ì¤‘...');
})();
</script>
  <h2>ì‘ì—…ì¼ì§€</h2>

  <div class="row">
    <input id="date" type="date" />
    <button id="btnSave">ì €ì¥</button>
  </div>

  <div class="row">
    <select id="site"></select>
    <button id="btnSiteManage">í˜„ì¥ê´€ë¦¬</button>
  </div>

  <div class="row">
    <button id="btnDailyText" style="flex:1;">ì¶œë ¥ì¼ë³´ ë¬¸ìë³´ë‚´ê¸°</button>
    <button id="btnCopyDaily" style="flex:1;">ë³µì‚¬</button>
  </div>

  <!-- íŒ€ì¥ -->
  <div class="row">
    <div class="chip">
      <input id="useLeader" type="checkbox" checked />
      <label for="useLeader">ì „ë‚ ê°’ ì‚¬ìš©</label>
    </div>
    <button id="addLeader">+ ì¶”ê°€</button>
    <button data-mic="leader">ğŸ™ï¸</button>
  </div>
  <div id="leaderBox" class="stack">
    <input class="leader" placeholder="íŒ€ì¥ (í•œ ì¹¸ = í•œ íŒ€)" />
  </div>

  <!-- ì‘ì—…ì -->
  <div class="row">
    <div class="chip">
      <input id="useWorkers" type="checkbox" checked />
      <label for="useWorkers">ì „ë‚ ê°’ ì‚¬ìš©</label>
    </div>
    <button id="addWorker">+ ì¶”ê°€</button>
    <button data-mic="workers">ğŸ™ï¸</button>
  </div>
  <div id="workersBox" class="stack">
    <input class="worker" placeholder="ì‘ì—…ì (í•œ ì¹¸ = í•œ íŒ€: ì˜ˆ) ê¹€ì² ìˆ˜,ë°•ì˜í¬ ë˜ëŠ” ?ëª…)" />
  </div>

  <!-- ì‘ì—…ë‚´ìš© -->
  <div class="row">
    <div class="chip">
      <input id="useWork" type="checkbox" checked />
      <label for="useWork">ì „ë‚ ê°’ ì‚¬ìš©</label>
    </div>
    <button id="addWork">+ ì¶”ê°€</button>
    <button data-mic="work">ğŸ™ï¸</button>
  </div>
  <div id="workBox" class="stack">
    <textarea class="work" placeholder="ì‘ì—…ë‚´ìš© (í•œ ì¹¸=í•œ ë©ì–´ë¦¬, +ì¶”ê°€ ê°€ëŠ¥)"></textarea>
  </div>

  <div class="row">
    <button id="btnPrefill">ì „ë‚ ê°’ ë‹¤ì‹œ ì ìš©</button>
  </div>

  <hr/>

  <h3>ê²€ìƒ‰</h3>
  <div class="row">
    <input id="keyword" placeholder="í‚¤ì›Œë“œ (ë¹„ìš°ë©´ ì „ì²´)" />
    <button id="btnSearch">ê²€ìƒ‰</button>
  </div>

  <details>
    <summary class="muted">í•„í„°(í˜„ì¥/ê¸°ê°„)</summary>
    <div class="row">
      <select id="searchSite">
        <option value="">(ì „ì²´ í˜„ì¥)</option>
      </select>
    </div>
    <div class="row">
      <input id="from" type="date" />
      <input id="to" type="date" />
    </div>
    <div class="muted">â€» ê¸°ê°„ì„ ë¹„ìš°ë©´ ì „ì²´ ê¸°ê°„ ê²€ìƒ‰</div>
  </details>

  <div id="results"></div>

  <!-- í˜„ì¥ê´€ë¦¬ -->
  <dialog id="dlgSites">
    <div style="min-width:280px; padding:10px;">
      <h3>í˜„ì¥ê´€ë¦¬</h3>
      <div class="row">
        <input id="newSite" placeholder="í˜„ì¥ëª… ì¶”ê°€" />
        <button id="btnAddSite">ì¶”ê°€</button>
      </div>
      <div class="muted">â€» Active=YESì¸ í˜„ì¥ë§Œ ë“œë¡­ë‹¤ìš´ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
      <div class="row" style="justify-content:flex-end;">
        <button id="btnCloseSites">ë‹«ê¸°</button>
      </div>
    </div>
  </dialog>

  <!-- í° ë²„íŠ¼ í™•ì¸ íŒì—… -->
  <dialog id="confirmDlg">
    <div style="padding:16px; min-width:280px; max-width:520px;">
      <h3 id="confirmTitle" style="margin:0 0 10px 0;">í™•ì¸</h3>
      <div id="confirmMsg" style="white-space:pre-wrap; line-height:1.4;"></div>

      <div style="display:flex; gap:10px; margin-top:14px;">
        <button id="confirmYes" style="flex:1; padding:14px; font-size:18px; border-radius:12px;">ë®ì–´ì“°ê¸°</button>
        <button id="confirmNo" style="flex:1; padding:14px; font-size:18px; border-radius:12px;">ì·¨ì†Œ</button>
      </div>

      <div class="muted" style="margin-top:10px;">
        â€» ë®ì–´ì“°ê¸°ë¥¼ ëˆ„ë¥´ë©´ ì „ë‚ ê°’/ë¶ˆëŸ¬ì˜¤ê¸° ê°’ì´ í˜„ì¬ ì…ë ¥ì„ ëŒ€ì²´í•©ë‹ˆë‹¤.
      </div>
    </div>
  </dialog>

  <!-- ì¶œë ¥ì¼ë³´ íŒì—… -->
  <dialog id="dailyDlg">
    <div style="padding:16px; min-width:280px; max-width:520px;">
      <h3 style="margin:0 0 10px 0;">ì˜¤ëŠ˜ ì¶œë ¥ì¼ë³´(ë³µì‚¬í•´ì„œ ë¬¸ì/ì¹´í†¡)</h3>

      <textarea id="dailyText" style="width:100%; min-height:220px; padding:12px; font-size:16px;"></textarea>

      <div style="display:flex; gap:10px; margin-top:14px;">
        <button id="dailyCopy" style="flex:1; padding:14px; font-size:18px; border-radius:12px;">ë³µì‚¬</button>
        <button id="dailyShare" style="flex:1; padding:14px; font-size:18px; border-radius:12px;">ê³µìœ </button>
      </div>

      <div style="display:flex; gap:10px; margin-top:10px;">
        <button id="dailyClose" style="flex:1; padding:14px; font-size:18px; border-radius:12px;">ë‹«ê¸°</button>
      </div>

      <div class="muted" style="margin-top:10px;">
        â€» â€œê³µìœ â€ë¥¼ ëˆ„ë¥´ë©´ ë¬¸ìì•±/ì¹´í†¡ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤(ê¸°ê¸° ì§€ì› ì‹œ).
      </div>
    </div>
  </dialog>

  <script src="app.js" onerror="document.getElementById('diag').textContent='ì§„ë‹¨: app.js ë¡œë”© ì‹¤íŒ¨(ê²½ë¡œ/Pages ì„¤ì • í™•ì¸)'; alert('app.js ë¡œë”© ì‹¤íŒ¨: URL ê²½ë¡œ/Pages ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”');"></script>
<script>
// app.jsê°€ ì •ìƒ ë¡œë“œë˜ë©´ ì—¬ê¸°ê¹Œì§€ ë„ë‹¬
setTimeout(function(){
  var d=document.getElementById('diag');
  if(d && d.textContent.indexOf('ë¡œë”© ì‹¤íŒ¨')===-1){ d.textContent = 'ì§„ë‹¨: app.js ë¡œë“œë¨. ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.'; }
}, 0);
</script>
</body>
</html>
